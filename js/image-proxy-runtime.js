!function(){"use strict";const t="https://imgcf.aixbox.top/",e="aixbox.top";function r(r){return!(!r||r.startsWith(t))&&(!r.startsWith("/")&&!r.startsWith(".")&&(!!r.match(/^https?:\/\//)&&!r.includes(e)))}function c(e){return r(e)?t+e:e}function o(){let t=0;document.querySelectorAll("img").forEach((e=>{if(e.src&&r(e.src)){const r=e.src;e.src=c(e.src),e.dataset.originalSrc=r,t++}if(e.srcset){const r=e.srcset.replace(/(https?:\/\/[^\s,]+)/g,(t=>c(t.trim())));r!==e.srcset&&(e.srcset=r,t++)}})),document.querySelectorAll('[style*="background-image"]').forEach((e=>{const o=e.style.backgroundImage.match(/url\(["']?([^"')]+)["']?\)/);o&&r(o[1])&&(e.style.backgroundImage=`url("${c(o[1])}")`,t++)})),t>0&&console.log(`[Image Proxy Runtime] 已代理 ${t} 张跨域图片`)}function s(){o(),new MutationObserver((t=>{t.forEach((t=>{t.addedNodes.forEach((t=>{1===t.nodeType&&("IMG"===t.tagName&&r(t.src)&&(t.src=c(t.src)),t.querySelectorAll&&t.querySelectorAll("img").forEach((t=>{r(t.src)&&(t.src=c(t.src))})))}))}))})).observe(document.body,{childList:!0,subtree:!0}),console.log("[Image Proxy Runtime] ✓ 运行时图片代理已启用")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):s(),"undefined"!=typeof pjax&&document.addEventListener("pjax:complete",o)}();